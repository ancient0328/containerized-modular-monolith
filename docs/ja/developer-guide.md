# 開発者ガイド

## はじめに

このガイドでは、開発環境のセットアップ方法とコンテナ化モジュラーモノリスフレームワークの使い方について説明します。

## 前提条件

開始する前に、以下がインストールされていることを確認してください：

- Node.js（v14以降）
- DockerとDocker Compose
- Git

## 開発環境のセットアップ

### 1. リポジトリのクローン

```bash
git clone https://github.com/your-username/containerized-modular-monolith.git
cd containerized-modular-monolith
```

### 2. セットアップスクリプトの実行

フレームワークは対話式のセットアップスクリプトを提供しており、初期設定をガイドします：

```bash
node setup/init.js
```

セットアップ中に以下の選択を求められます：
- 希望する言語の選択
- プロジェクト名の入力
- 含めるモジュールの選択
- フロントエンドとバックエンドのフレームワークの選択
- パッケージマネージャーの選択
- クラウドプロバイダーの選択（該当する場合）

### 3. 依存関係のインストール

セットアップスクリプトが完了したら、選択したパッケージマネージャーを使用して依存関係をインストールします：

```bash
# npmを使用する場合
npm install

# yarnを使用する場合
yarn

# pnpmを使用する場合
pnpm install
```

## 開発ワークフロー

### モジュール開発

フレームワーク内の各モジュールは独立して開発できるように設計されています：

1. **モジュールディレクトリに移動**：
   ```bash
   cd modules/frontend/react-app
   ```

2. **開発サーバーの起動**：
   ```bash
   npm run dev
   ```

3. **変更を加える**：開発サーバーにはホットリロードが含まれており、スムーズな開発体験を提供します。

### 複数のモジュールでの作業

複数のモジュールで作業する場合は、Docker Composeを使用してアプリケーション全体を実行できます：

```bash
docker-compose up
```

これにより、すべてのモジュールが別々のコンテナで起動し、それらの間に必要なネットワークが設定されます。

## テスト

### ユニットテスト

特定のモジュールのユニットテストを実行：

```bash
cd modules/backend/api
npm test
```

### 統合テスト

モジュール間の相互作用を検証する統合テストを実行：

```bash
npm run test:integration
```

### エンドツーエンドテスト

ユーザー操作をシミュレートするエンドツーエンドテストを実行：

```bash
npm run test:e2e
```

## 本番環境用のビルド

### モジュールのビルド

特定のモジュールをビルド：

```bash
cd modules/frontend/react-app
npm run build
```

### アプリケーション全体のビルド

すべてのモジュールをビルド：

```bash
npm run build
```

これにより、すべてのモジュールの最適化された本番ビルドが作成されます。

## デプロイメント

様々な環境へのアプリケーションのデプロイに関する詳細な手順については、[デプロイメントガイド](./deployment.md)を参照してください。

## トラブルシューティング

### 一般的な問題

#### モジュール間通信の問題

モジュールの通信に問題がある場合：
1. すべてのコンテナが実行されていることを確認する（`docker ps`）
2. Docker Composeのネットワーク設定を確認する
3. APIエンドポイントとポートを確認する

#### ビルド失敗

ビルドに失敗した場合：
1. すべての依存関係がインストールされていることを確認する
2. パッケージ間の互換性の問題を確認する
3. 環境変数が正しく設定されていることを確認する

## 貢献

フレームワークへの貢献を歓迎します！参加方法の詳細については、[貢献ガイド](./contributing.md)を参照してください。
